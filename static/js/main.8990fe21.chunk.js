(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(11),o=(n(21),n(22),n(23),n(12)),l=n(5),i=n(2),s=n(6),u=n(4),d=n(3),p=n.n(d),b=n(0);function j(e){var t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"};return n&&(c.body=JSON.stringify(n),c.headers={"Content-Type":"application/json; charset=UTF-8"}),(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch("https://mate.academy/students-api"+e,c)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var f=function(e){return j(e)},m=function(e,t){return j(e,"POST",t)},O=function(e,t){return j(e,"PATCH",t)},h=function(e){return j(e,"DELETE")},v=function(e,t){return O("/todos/".concat(e),t)},x=Object(c.memo)((function(e){var t=e.todo,n=e.deleteTodo,a=e.onChangeCompleted,r=e.onUpdateTitle,o=Object(c.useState)(!1),l=Object(u.a)(o,2),i=l[0],s=l[1],d=Object(c.useState)(""),j=Object(u.a)(d,2),f=j[0],m=j[1],O=Object(c.useCallback)((function(e){a(t.id,e.target.checked)}),[t.id,a]),h=Object(c.useCallback)((function(){return n(t.id)}),[t.id]),x=Object(c.useCallback)((function(){s(!0),m(t.title)}),[t.title]),k=Object(c.useCallback)((function(){s(!1),r(t.id,f)}),[t.id,f,r]),C=Object(c.useCallback)((function(e){"Enter"===e.key&&(s(!1),r(t.id,f)),"Escape"===e.key&&(s(!1),m(t.title))}),[t.id,f,r]),y=Object(c.useCallback)((function(e){e.preventDefault(),s(!1),f.trim()?(r(t.id,f),v(t.id,{title:f})):n(t.id)}),[t.id,f,r,n]);return Object(b.jsxs)("div",{className:p()("todo",{completed:t.completed}),children:[Object(b.jsx)("label",{className:"todo__status-label",htmlFor:"checkBox",children:Object(b.jsx)("input",{id:"checkBox",type:"checkbox",className:"todo__status",checked:t.completed,onChange:O})}),i?Object(b.jsx)("form",{onSubmit:y,children:Object(b.jsx)("input",{type:"text",className:"todo__title-field",placeholder:"Empty todo will be deleted",value:f,onChange:function(e){m(e.target.value)},onBlur:k,onKeyDown:C})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{type:"button",className:"todo__remove",onClick:h,children:"\xd7"}),Object(b.jsx)("span",{className:"todo__title",onDoubleClick:x,children:t.title})]}),Object(b.jsxs)("div",{className:"modal overlay",children:[Object(b.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(b.jsx)("div",{className:"loader"})]})]})})),k=function(e){var t=e.todos,n=e.tempTodo,c=e.deleteTodo,a=e.onChangeCompleted,r=e.onUpdateTitle;return Object(b.jsxs)("section",{className:"todoapp__main",children:[t.map((function(e){return Object(b.jsx)(x,{todo:e,deleteTodo:c,onChangeCompleted:a,onUpdateTitle:r},e.id)})),n&&Object(b.jsx)(x,{todo:n,deleteTodo:c,onChangeCompleted:a,onUpdateTitle:r},n.id)]})},C=function(e){return e.All="All",e.Active="Active",e.Completed="Completed",e}({}),y=function(e){var t=e.filterBy,n=e.setFilterBy;return Object(b.jsxs)("nav",{className:"filter",children:[Object(b.jsx)("a",{href:"#/",className:p()("filter__link",{selected:t===C.All}),onClick:function(e){e.preventDefault(),n(C.All)},children:"All"}),Object(b.jsx)("a",{href:"#/active",className:p()("filter__link",{selected:t===C.Active}),onClick:function(e){e.preventDefault(),n(C.Active)},children:C.Active}),Object(b.jsx)("a",{href:"#/completed",className:p()("filter__link",{selected:t===C.Completed}),onClick:function(e){e.preventDefault(),n(C.Completed)},children:C.Completed})]})},_=function(e){var t=e.filterBy,n=e.setFilterBy,c=e.activeCount,a=e.isCompleted,r=e.clearCompleted;return Object(b.jsxs)("footer",{className:"todoapp__footer",children:[Object(b.jsx)("span",{className:"todo-count",children:"".concat(c," items left")}),Object(b.jsx)(y,{filterBy:t,setFilterBy:n}),Object(b.jsx)("button",{type:"button",className:p()("todoapp__clear-completed",{hidden:!a}),onClick:r,children:"Clear completed"})]})},g=function(e){var t=e.makeTodo,n=e.isLoading,c=a.a.useState(""),r=Object(u.a)(c,2),o=r[0],l=r[1];return Object(b.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(o),l("")},children:Object(b.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:o,onChange:function(e){return l(e.target.value)},disabled:n})})},N=function(e){return e.Add="Unable to add todo",e.Delete="Unable to delete todo",e.Load="Unable to load todo",e.Title="Title can't be empty",e.Update="Unable to update todo",e}({}),T=10358,w=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),d=Object(u.a)(r,2),j=d[0],O=d[1],x=Object(c.useState)(C.All),y=Object(u.a)(x,2),w=y[0],A=y[1],U=Object(c.useState)(!1),B=Object(u.a)(U,2),S=B[0],E=B[1],D=Object(c.useState)(null),F=Object(u.a)(D,2),L=F[0],I=F[1],J=Object(c.useCallback)(Object(s.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("/todos?userId=".concat(T));case 3:t=e.sent,a(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),O(N.Load),setTimeout((function(){return O(N.Load)}),3e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]);Object(c.useEffect)((function(){J()}),[]);var P=n.filter((function(e){return!e.completed})).length,G=n.some((function(e){return e.completed})),H=n.filter((function(e){switch(w){case C.Completed:return e.completed;case C.Active:return!e.completed;case C.All:default:return!0}})),K=Object(c.useCallback)(function(){var e=Object(s.a)(Object(i.a)().mark((function e(t){var n,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!0),O(""),""!==t.trim()){e.next=5;break}return O(N.Title),e.abrupt("return");case 5:return e.prev=5,n={title:t,userId:T,completed:!1},I(Object(l.a)(Object(l.a)({},n),{},{id:0})),e.next=10,m("/todos",n);case 10:c=e.sent,a((function(e){return[].concat(Object(o.a)(e),[c])})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),O(N.Add);case 17:return e.prev=17,I(null),E(!1),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[5,14,17,21]])})));return function(t){return e.apply(this,arguments)}}(),[]),R=Object(c.useCallback)(function(){var e=Object(s.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(""),e.prev=1,e.next=4,h("/todos/".concat(t));case 4:a((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),O(N.Delete);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[n]),W=Object(c.useCallback)(Object(s.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.filter((function(e){return e.completed})).map((function(e){return e.id})).forEach((function(e){return R(e)}));case 2:case"end":return e.stop()}}),e)}))),[n]),q=Object(c.useCallback)(Object(s.a)(Object(i.a)().mark((function e(){var t,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.every((function(e){return e.completed})),c=n.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{completed:!t})})),a(c);case 3:case"end":return e.stop()}}),e)}))),[n]),z=Object(c.useCallback)(function(){var e=Object(s.a)(Object(i.a)().mark((function e(t,c){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),r=n.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{completed:!e.completed}):e})),e.prev=2,e.next=5,v(t,{completed:c});case 5:a(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),O(N.Update);case 11:return e.prev=11,E(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[n]),M=Object(c.useCallback)(function(){var e=Object(s.a)(Object(i.a)().mark((function e(t,c){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(""),E(!0),r=n.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{title:c}):e})),""===c.trim()&&(O(N.Title),R(t)),e.prev=4,e.next=7,v(t,{title:c});case 7:a(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),O(N.Update);case 13:return e.prev=13,E(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,10,13,16]])})));return function(t,n){return e.apply(this,arguments)}}(),[n]);return Object(b.jsxs)("div",{className:"todoapp",children:[Object(b.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(b.jsxs)("div",{className:"todoapp__content",children:[Object(b.jsxs)("header",{className:"todoapp__header",children:[n.length>0&&Object(b.jsx)("button",{type:"button",className:p()("todoapp__toggle-all",{hidden:!n.length,active:!P}),onClick:q}),Object(b.jsx)(g,{makeTodo:K,isLoading:S})]}),n.length>0&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(k,{todos:H,tempTodo:L,deleteTodo:R,onChangeCompleted:z,onUpdateTitle:M}),Object(b.jsx)(_,{filterBy:w,setFilterBy:A,activeCount:P,isCompleted:G,clearCompleted:W})]})]}),Object(b.jsxs)("div",{className:p()("notification is-danger is-light has-text-weight-normal",{hidden:!j}),children:[Object(b.jsx)("button",{type:"button",className:"delete",onClick:function(){return O("")}}),j]})]})};Object(r.createRoot)(document.getElementById("root")).render(Object(b.jsx)(w,{}))}},[[25,1,2]]]);
//# sourceMappingURL=main.8990fe21.chunk.js.map